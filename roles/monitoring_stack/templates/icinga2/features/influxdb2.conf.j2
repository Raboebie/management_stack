/* InfluxDB 2.x writer feature â€” generated by Ansible */

library "perfdata"

object Influxdb2Writer "influxdb2" {
  host = "influxdb"
  port = {{ influxdb_port }}
  organization = "{{ influxdb_org }}"
  bucket = "{{ influxdb_bucket }}"
  auth_token = "{{ influxdb_admin_token }}"

  enable_send_thresholds = true
  enable_send_metadata = true

  flush_interval = 10s
  flush_threshold = 1024

  host_template = {
    measurement = "$host.check_command$"
    tags = {
      hostname = "$host.name$"
    }
  }

  service_template = {
    measurement = "$service.check_command$"
    tags = {
      hostname = "$host.name$"
      service = "$service.name$"
    }
  }
}
